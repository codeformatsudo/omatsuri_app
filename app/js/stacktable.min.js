!function(t){t.fn.cardtable=function(e){var a=this,o={id:"stacktable small-only",hideOriginal:!0,headIndex:0},r=t.extend({},o,e);return headIndex=e&&e.headIndex?e.headIndex:0,a.each(function(){if($table=t(this),!$table.hasClass("stacktable")){var e=t(this).prop("class"),a=t("<div></div>");"undefined"!=typeof r.myClass&&a.addClass(r.myClass);var o="";$table.addClass("stacktable large-only"),$caption=$table.find("caption").clone(),$topRow=$table.find("tr").eq(0),$table.find("tbody tr").each(function(){headMarkup="",bodyMarkup="",tr_class=t(this).prop("class"),t(this).find("td,th").each(function(e){""!==t(this).html()&&(bodyMarkup+='<tr class="'+tr_class+'">',bodyMarkup+=$topRow.find("td,th").eq(e).html()?'<td class="st-key">'+$table.find("thead th").eq(e).html()+"</td>":'<td class="st-key"></td>',bodyMarkup+='<td class="st-val '+t(this).prop("class")+'">'+t(this).html()+"</td>",bodyMarkup+="</tr>")}),o+='<table class=" '+e+" "+r.id+'"><tbody>'+headMarkup+bodyMarkup+"</tbody></table>"}),$table.find("tfoot tr td").each(function(a,i){""!==t.trim(t(i).text())&&(o+='<table class="'+e+" "+r.id+'"><tbody><tr><td>'+t(i).html()+"</td></tr></tbody></table>")}),a.prepend($caption),a.append(t(o)),$table.before(a),r.hideOriginal||$table.show()}})},t.fn.stacktable=function(e){var a=this,o={id:"stacktable small-only",hideOriginal:!0,headIndex:0},r=t.extend({},o,e);return headIndex=e&&e.headIndex?e.headIndex:0,a.each(function(){var e=t(this).prop("class"),a=t('<table class="'+e+" "+r.id+'"><tbody></tbody></table>');"undefined"!=typeof r.myClass&&a.addClass(r.myClass);var o="";$table=t(this),$table.addClass("stacktable large-only"),$caption=$table.find("caption").clone(),$topRow=$table.find("tr").eq(0),$table.find("tr").each(function(e){headMarkup="",bodyMarkup="",tr_class=t(this).prop("class"),0===e?o+='<tr class=" '+tr_class+' "><th class="st-head-row st-head-row-main" colspan="2">'+t(this).find("th,td").eq(headIndex).html()+"</th></tr>":(t(this).find("td,th").each(function(e){e===headIndex?headMarkup='<tr class="'+tr_class+'"><th class="st-head-row" colspan="2">'+t(this).html()+"</th></tr>":""!==t(this).html()&&(bodyMarkup+='<tr class="'+tr_class+'">',bodyMarkup+=$topRow.find("td,th").eq(e).html()?'<td class="st-key">'+$topRow.find("td,th").eq(e).html()+"</td>":'<td class="st-key"></td>',bodyMarkup+='<td class="st-val '+t(this).prop("class")+'">'+t(this).html()+"</td>",bodyMarkup+="</tr>")}),o+=headMarkup+bodyMarkup)}),a.prepend($caption),a.append(t(o)),$table.before(a),r.hideOriginal||$table.show()})},t.fn.stackcolumns=function(e){var a=this,o={id:"stacktable small-only",hideOriginal:!0},r=t.extend({},o,e);return a.each(function(){$table=t(this);var e=$table.find("tr").eq(0).find("td,th").length;if(!(3>e)){var a=t('<table class="'+r.id+'"></table>');"undefined"!=typeof r.myClass&&a.addClass(r.myClass),$table.addClass("stacktable large-only");for(var o=t("<tbody></tbody>"),i=1;e>i;)$table.find("tr").each(function(e){var r=t("<tr></tr>");0===e&&r.addClass("st-head-row st-head-row-main"),first=t(this).find("td,th").eq(0).clone().addClass("st-key");var n=i;if(t(this).find("*[colspan]").length){var s=0;t(this).find("td,th").each(function(){var o=t(this).attr("colspan");return o?(o=parseInt(o,10),n-=o-1,s+o>i&&(n+=s+o-i-1),s+=o):s++,s>i?!1:void 0})}second=t(this).find("td,th").eq(n).clone().addClass("st-val").removeAttr("colspan"),r.append(first,second),o.append(r)}),++i;a.append(t(o)),$table.before(a),r.hideOriginal||$table.show()}})}}(jQuery);